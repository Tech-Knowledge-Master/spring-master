## JPA 영속성 컨텍스트의 이점(5가지)을 설명해주세요.

---

### 1. 영속성 컨텍스트가 무엇인가요?
엔티티(entity)들을 `영구 저장하는 환경`을 말합니다.
영속성 컨텍스트는 데이터의 `일관성`과 `최적화` 그리고 `개발 편의성`을 위한 핵심 매커니즘으로,
EntityManager를 생성할 때 함께 만들어지고, EM을 통해 접근하고 관리할 수 있습니다.


### 2. 각각의 이점을 설명할 수 있나요?
1. 1차 캐시
   - 한 트랜잭션 내에서 반복적으로 조회하는 엔티티를 빠르게 조회하는 기능
   - 이 때 DB에 접근하는 것이 아닌, 메모리 내부의 캐시에서 조회
   - 1차 캐시에 없으면 DB에서 조회하여 1차 캐시에 등록
   - 🌟영속성 컨텍스는 내부에 map 형태로 된 1차 캐시를 가지고 있다
   
2. 동일성(identity)
   - 동일한 엔티티에 대해 항상 같은 객체 인스턴스를 반환
   - 엔티티의 동일성을 보장해 데이터의 일관성을 유지

3. 트랜잭션 지원의 쓰기 지연(write-behind)
   - 엔티티의 변경 사항을 즉시 db에 반영❌, 트랜잭션 종료 시까지 모아둠
   - 트랜잭션 내의 여러 변경 사항을 한 번에 db에 반영
   - 네트워크 사용량🔽

4. 변경 감지(dirty checking)
   - 엔티티의 상태 변경을 자동으로 감지하여, 트랜잭션 커밋시 변경 사항을 db에 자동 반영
   - 개발자의 수동적인 관리❌, 데이터의 일관성 유지

5. 지연 로딩(lazy loading)
   - 엔티티의 연관된 데이터가 실제 사용될 때까지 로딩을 미룸
   - 불필요한 db의 접근을 줄이고, 성능을 최적화