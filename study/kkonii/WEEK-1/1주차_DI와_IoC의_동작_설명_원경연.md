## Spring DI/IoC는 어떻게 동작하나요?

---

### 1. DI?
DI는 IoC의 한 형태로, 객체가 필요로 하는 `의존성을 외부에서 주입`해주는 방법이다.   
즉, 객체가 직접 의존성을 생성하지 않고, 외부(스프링 컨테이너 등)에서 생성된 의존성을 주입 받아 사용할 수 있다.


### 2. DI는 어떻게 동작하나요?
DI의 동작 방식은  크게 4단계로 나누어 볼 수 있다.

```
1. 정의: 개발자는 컴포넌트(클래스, 서비스 등) 간의 의존성을 XML 설정 파일, 어노테이션, 자바 기반 설정 등을 사용하여 정의
2. 등록: 스프링 컨테이너와 같은 IoC 컨테이너는 이러한 정의를 기반으로 의존성을 관리할 객체(Bean)의 메타데이터를 등록
3. 생성: 애플리케이션 실행 시, IoC 컨테이너는 이 메타데이터를 사용하여 객체를 생성
4. 주입: 생성된 객체에 필요한 의존성을 컨테이너가 자동으로 주입. 의존성 주입은 주로 생성자 주입, 세터 주입, 필드 주입 방법을 사용
```


### 3. IoC?
`제어의 역전(Inversion of Control)`을 가리키는 표현.
👉 객체의 생성과 객체 간의 의존 관계 설정 같은 제어를 개발자가 아닌 외부 컨테이너나 프레임워크가 담당하는 것을 말한다.
전통적으로 개발자는 프로그램의 흐름을 직접 제어했지만, IoC를 사용하면 이러한 제어권이 프레임워크에 넘어간다.

그렇다면 왜 IoC 방식을 사용하는가?
👉 소프트웨어 설계의 복잡성을 줄이고, 개발자가 애플리케이션의 핵심 로직에 더 집중할 수 있도록 돕기 위함이다.

1. 프레임워크가 객체의 생명 주기를 관리   
   👉 개발자는 구성 요소 간의 결합도에 대해 덜 걱정하면서 코드를 더 쉽게 변경하고 유지보수
2. 의존성을 외부에서 주입   
   👉 단위 테스트 시 테스트 대상 객체 격리가 용이
3. IoC를 통해 애플리케이션의 구성 요소를 중앙에서 관리   
   👉 개발자는 애플리케이션의 다양한 부분을 더 쉽게 조정하고 구성 가능


### 4. IoC는 어떻게 동작하나요?
```
1. 컨테이너 초기화: 스프링 애플리케이션 컨텍스트(ApplicationContext)와 같은 IoC 컨테이너가 초기화되며, 이 과정에서 빈 정의를 로드하고 컨테이너에 등록
2. 빈 생성: 컨테이너는 빈 정의에 따라 객체(빈)를 생성. 이 때, 객체의 생성, 구성, 의존성 설정 등이 이루어진다
3. 의존성 주입: 객체에 필요한 의존성을 컨테이너가 주입. DI를 통해 이루어지며, 객체는 외부로부터 필요한 의존성을 자동으로 받게 된다
4. 생명 주기 관리: 컨테이너는 빈의 생명 주기를 관리. 이는 객체의 생성부터 사용, 소멸에 이르기까지 전 과정을 포함하며, 필요에 따라 콜백 메서드를 호출 가능
```