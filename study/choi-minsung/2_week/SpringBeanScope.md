# Spring Bean Scope
## Bean Scope
빈 스코프는 빈의 존재할 수 있는 범위를 뜻하며 디폴트는 싱글톤으로 설정되어있다.

즉, 빈이 어떤 설정으로 생성되는지 결정하는 것을 빈 스코프라고 한다.

### Singleton
스프링 컨테이너가 생성될 때부터, 종료시까지 모든 빈의 생명주기를 관리하고, 빈의 유일성을 보장하는 스코프이다.

### ProtoType
싱글톤과 다르게 스프링 컨테이너가 생성시 매번 새로운 빈을 생성하여 리턴하는 빈을 프로토타입 빈이라고 한다.

또한 생성된 후 컨테이너가 빈을 관리하지 않으므로 종료 메서드 또한 컨테이너에 의해서 호출되지 않는다.

### WebScope
웹 스코프는 웹 환경에서 동작하며 스프링 컨테이너가 이 빈을 관리하므로 종료 메서드까지 컨테이너가 알아서 관리하게 된다.

웹스코프 종류는 다음과 같다.
1. request : HTTP 요청 하나가 들어오고 나갈 때까지 유지되는 스코프. 각각의 HTTP 요청마다 별도의 빈 인스턴스가 생성되고 관리된다.
2. session : HTTP session 과 동일한 생명 주기를 가지는 스코프
3. application : 서블릿 컨텍스트과 동일한 생명 주기를 가지는 스코프
4. websocket : 웹 소켓과 동일한 생명 주기를 가지는 스코프

웹 스코프인경우 실제 요청이 들어왔을 때 해당하는 객체가 생성되므로, 일반적인 생성자/수정자 주입 방식을 가지고 진행하면 오류가 발생한다.

따라서 ObjectProvider(DL방식), ProxyMode(CGLIB 라이브러리 사용)를 사용하게 된다.

**ObjectProvider**

Dependency LookUp 방식을 사용하며, 의존성이 필요한 경우 컨테이너가 그 시점에서 객체를 찾아서 주입하는 방식이다.

**ProxyMode**

가짜 프록시 객체는, HTTP 요청이 들어왔을 때 내부에서 진짜 빈을 요청하는 위임 로직을 가지고 있다. 프록시 객체는 원본 클래스를 상속해서 만들어졌기 때문에, 이 객체를 사용하는 클라이언트 입장에서는 원본인지 아닌지 모르게 동일하게 사용할 수 있다.



### 참고자료
- https://mslim8803.tistory.com/70
- https://hjhng125.github.io/spring/dependency-lookup/
- 